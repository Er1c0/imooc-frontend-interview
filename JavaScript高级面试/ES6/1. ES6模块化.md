# 1. ES6 模块化

## 1.1. 模块化的基本语法

（1）util1.js：

```JavaScript
export default var a = 100;

export function foo {
  console.log('util1-foo');
}
```

`export default`命令用于指定模块的默认输出。显然，一个模块只能有一个默认输出。

有了默认输出之后，其他模块加载该模块时，import 命令可以为该匿名变量/函数，起**任意的名字**。

上面的代码中，默认输出是一个变量。当然，我们也可以换成**默认输出一个匿名函数**：

```JavaScript
export default function() {
  console.log('util1-function');
}
```

（2）util2.js：

```JavaScript
export var myUtil2 = 'this is util2';

export function fn1() {
  console.log('util2-fn1');
}

export function fn2() {
  console.log('util2-fn2');
}
```

上方代码中，我把一个变量和两个函数作为了导出。

（3）index.js：

## 1.2. 开发环境

### 1.2.1. babel

- 电脑有 node 环境，运行 npm init
- npm install --save-dev babel-core babel-preset-es2015 babel-preset-latest
- 目录下创建.babelrc 文件
- npm install --g babel-cli
- babel-version
- 创建./src/index.js
- 内容：[1,2,3].map(item => item + 1)
- babel src/index.js

## 1.3. webpack

- npm install webpack babel-loader --save-dev
- 配置 webpack.config.js
- 配置 package.json 中的 scripts
- 运行 npm start

## 1.4. rollup

- vue、react 都是通过 rollup 来打包的，能尽量简化代码，优化冗余内容

  - npm init
  - npm i rollup rollup-plugin-node-resolve rollup-plugin-babel
    babel-plugin-external-helpers babel-preset-latest --save-dev
  - 配置 .babelrc
  - 配置 rollup.config.js
  - 将 webpack 环境的 JS 代码拷贝过来
  - 修改 package.json 的 scripts
  - 运行 npm start

- rollup 功能单一，webpack 功能强大，学习成本高

- 参考设计原则和《Linux/Unix 设计思想》

- 工具要尽量功能单一，可集成，可扩展

## 1.5. JS 众多模块化标准

- 没有模块化
- AMD 成为标准，require.js（CMD）
- 前端打包工具，使得 nodejs 模块化可以被使用
- ES6 出现，想统一现在所有模块化标准
- nodejs 积极支持，浏览器尚未统一
- 可以自造 lib，但不要自造标准

## 1.6. 一般面试问题解答

- 语法：import export （注意有无 default）
- 环境：babel 编译 ES6 语法，模块化可用 webpack 和 rollup
- 扩展：说一下自己对模块化统一的期待
